// Generated by CoffeeScript 1.10.0
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  define(['paper', 'R', 'Utils/Utils', 'Tools/Tool', 'Tools/ItemTool', 'Items/Lock'], function(P, R, Utils, Tool, ItemTool, Lock) {
    var LockTool;
    LockTool = (function(superClass) {
      extend(LockTool, superClass);

      LockTool.label = 'Lock';

      LockTool.description = '';

      LockTool.iconURL = 'lock.png';

      LockTool.favorite = true;

      LockTool.category = '';

      LockTool.cursor = {
        position: {
          x: 0,
          y: 0
        },
        name: 'default',
        icon: 'key'
      };

      LockTool.order = 4;

      LockTool.drawItems = false;

      function LockTool() {
        LockTool.__super__.constructor.call(this, Lock);
        this.textItem = null;
        return;
      }

      LockTool.prototype.update = function(event, from) {
        var cost, point, ref;
        if (from == null) {
          from = R.me;
        }
        point = event.point;
        cost = R.currentPaths[from].bounds.area / 1000.0;
        if ((ref = this.textItem) != null) {
          ref.remove();
        }
        this.textItem = new P.PointText(point);
        this.textItem.justification = 'right';
        this.textItem.fillColor = 'black';
        this.textItem.content = '' + cost + ' commeUnDesseinCoins';
        LockTool.__super__.update.call(this, event, from);
      };

      LockTool.prototype.end = function(event, from) {
        var ref;
        if (from == null) {
          from = R.me;
        }
        if ((ref = this.textItem) != null) {
          ref.remove();
        }
        if (LockTool.__super__.end.call(this, event, from)) {
          Lock.initialize(R.currentPaths[from].bounds);
          delete R.currentPaths[from];
        }
      };

      return LockTool;

    })(ItemTool);
    R.Tools.Lock = LockTool;
    return LockTool;
  });

}).call(this);
