// Generated by CoffeeScript 1.10.0
(function() {
  var baseUrl, getParameters, libs, parameters, prefix, repository;

  libs = '../../libs/';

  console.log('libs', libs);

  getParameters = function(hash) {
    var key, parameters, re, tokens, value;
    hash = hash.replace('#', '');
    parameters = {};
    re = /[?&]?([^=]+)=([^&]*)/g;
    while (tokens = re.exec(hash)) {
      key = decodeURIComponent(tokens[1]);
      value = decodeURIComponent(tokens[2]);
      parameters[key] = value === 'true' ? true : value === 'false' ? false : value;
    }
    return parameters;
  };

  parameters = typeof document !== "undefined" && document !== null ? getParameters(document.location.hash) : null;

  repository = {
    owner: 'arthursw',
    commit: null
  };

  if ((parameters != null) && (parameters['repository-owner'] != null) && (parameters['repository-commit'] != null)) {
    prefix = parameters['repository-use-cdn'] != null ? '//cdn.' : '//';
    baseUrl = prefix + 'rawgit.com/' + parameters['repository-owner'] + '/wetu-client/' + parameters['repository-commit'] + '/js';
    repository = {
      owner: parameters['repository-owner'],
      commit: parameters['repository-commit']
    };
    libs = location.origin + '/static/libs/';
  } else {
    baseUrl = '../static/wetu-client/js';
  }

  requirejs.config({
    waitSeconds: 300,
    baseUrl: baseUrl,
    paths: {
      'i18next': [libs + 'i18next.min'],
      'potrace': [libs + 'potrace'],
      'i18nextXHRBackendID': [libs + 'i18nextXHRBackend'],
      'i18nextBrowserLanguageDetectorID': [libs + 'i18nextBrowserLanguageDetector'],
      'moment': [libs + 'moment.min'],
      'jqueryI18next': [libs + 'jquery-i18next.min'],
      'hammerjs': [libs + 'hammer.min'],
      'jquery-hammer': [libs + 'jquery.hammer'],
      'underscore': [libs + 'underscore-min'],
      'jquery': [libs + 'jquery-2.1.3.min'],
      'jqueryUi': [libs + 'jquery-ui.min'],
      'mousewheel': [libs + 'jquery.mousewheel.min'],
      'tinycolor2': [libs + 'tinycolor'],
      'bootstrap': [libs + 'bootstrap.min'],
      'paper': [libs + 'paper-full'],
      'gui': [libs + 'dat.gui'],
      'zeroClipboard': [libs + 'ZeroClipboard.min'],
      'socket.ioID': libs + 'socket.io',
      'js-cookie': libs + 'js.cookie',
      'fileSaver': libs + 'FileSaver.min',
      'cropper': libs + 'cropper/cropper.min',
      'three': libs + 'three/build/three.min',
      'EffectComposer': libs + 'three/examples/js/postprocessing/EffectComposer',
      'CopyShader': libs + 'three/examples/js/shaders/CopyShader',
      'RenderPass': libs + 'three/examples/js/postprocessing/RenderPass',
      'ShaderPass': libs + 'three/examples/js/postprocessing/ShaderPass',
      'grayscaleShader': libs + 'three/shaders/grayscale',
      'paletteShader': libs + 'three/shaders/palette',
      'separateColorsShader': libs + 'three/shaders/separateColors',
      'stripesShader': libs + 'three/shaders/stripes',
      'erodeShader': libs + 'three/shaders/erode',
      'adaptiveThresholdShader': libs + 'three/shaders/adaptiveThreshold',
      'vertexShader': libs + 'three/shaders/vertex'
    },
    shim: {
      'mousewheel': ['jquery'],
      'jqueryUi': ['jquery'],
      'bootstrap': ['jquery'],
      'js-cookie': ['jquery'],
      'i18nextXHRBackendID': ['i18next'],
      'i18nextBrowserLanguageDetectorID': ['i18next'],
      'jqueryI18next': ['i18next'],
      'underscore': {
        exports: '_'
      },
      'jquery': {
        exports: '$'
      },
      'three': {
        exports: 'THREE'
      },
      'EffectComposer': ['three', 'CopyShader'],
      'RenderPass': ['three', 'EffectComposer'],
      'ShaderPass': ['three', 'EffectComposer']
    }
  });

  requirejs(['R', 'jquery', 'underscore'], function(R) {
    var canvasJ;
    R.defaultColors = [];
    R.city = {};
    canvasJ = $('#canvas');
    R.city.strokeWidth = canvasJ.attr('data-city-stroke-width');
    if (_.isString(R.city.strokeWidth)) {
      R.city.strokeWidth = parseFloat(R.city.strokeWidth.replace(',', '.'));
    } else {
      R.city.strokeWidth = null;
    }
    R.city.width = canvasJ.attr('data-city-width');
    if (_.isString(R.city.width)) {
      R.city.width = parseFloat(R.city.width.replace(',', '.'));
    } else {
      R.city.width = null;
    }
    R.city.height = canvasJ.attr('data-city-height');
    if (_.isString(R.city.height)) {
      R.city.height = parseFloat(R.city.height.replace(',', '.'));
    } else {
      R.city.height = null;
    }
    R.city.pixelPerMm = canvasJ.attr('data-city-pixel-per-mm');
    if (_.isString(R.city.pixelPerMm)) {
      R.city.pixelPerMm = parseFloat(R.city.pixelPerMm.replace(',', '.'));
      if (isNaN(R.city.pixelPerMm)) {
        console.error('City pixelPerMm is Nan', R.city.pixelPerMm, canvasJ.attr('data-city-pixel-per-mm'));
      }
    } else {
      R.city.pixelPerMm = null;
    }
    R.polygonMode = false;
    R.selectionBlue = '#2fa1d6';
    R.parameters = {};
    R.parameters['General'] = {};
    R.parameters['General'].location = {
      type: 'string',
      label: 'Location',
      "default": '0.0, 0.0',
      permanent: true
    };
    R.parameters["default"] = {};
    R.parameters.strokeWidth = {
      type: 'slider',
      label: 'Stroke width',
      min: 1,
      max: 100,
      "default": 5
    };
    R.parameters.strokeColor = {
      type: 'color',
      label: 'Stroke color'
    };
    R.parameters.fillColor = {
      type: 'color',
      label: 'Fill color'
    };
    R.strokeColor = 'black';
    R.fillColor = "rgb(255,255,255,255)";
    R.displayGrid = false;
    R.repository = repository;
    R.tipibot = parameters['tipibot'];
    R.style = parameters['style'] || 'line';
    R.initialZoom = parameters['zoom'];
    R.getParameters = getParameters;
    R.administrator = parameters['administrator'];
    requirejs(['Main']);
  });

}).call(this);

//# sourceMappingURL=App.js.map
